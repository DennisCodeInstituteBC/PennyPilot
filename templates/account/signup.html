{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load account socialaccount %}

{% block extra-css %}
<link rel="stylesheet" href="{% static 'css/signup.css' %}">
{% endblock extra-css %}

{% block head_title %}{% trans "Sign Up" %}{% endblock head_title %}

{% block content %}
<div class="signup-page-container">
    <div class="signup-wrapper">
        <!-- Left Image Container -->
        <div class="signup-image">
            <img src="{% static 'images/signup-image.jpg' %}" alt="Sign up image">
        </div>

        <!-- Right Form Container -->
        <div class="signup-container">
            <h2>{% trans "Sign Up" %}</h2>

            <form class="signup" id="signup_form" method="post" action="{% url 'account_signup' %}">
                {% csrf_token %}
                {{ form.as_p }}
                {% if redirect_field_value %}
                <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
                {% endif %}
                <button type="submit">{% trans "Sign Up" %} &raquo;</button>
              </form>

            <div class="login-link">
                {% trans "Already have an account?" %} <a href="{% url 'account_login' %}">{% trans "Login" %}</a>
            </div>
        </div>
    </div>
</div>

<script>
    function validatePassword() {
        const password = document.getElementById("password").value;
        const repassword = document.getElementById("repassword").value;
        const errorMsg = document.getElementById("passwordError");

        errorMsg.style.display = "none";

        if (password.length < 8) {
            errorMsg.textContent = "{% trans 'Password must be at least 8 characters long.' %}";
            errorMsg.style.display = "block";
            return false;
        }

        const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;
        if (!password.match(passwordRegex)) {
            errorMsg.textContent = "{% trans 'Password must contain both letters and numbers.' %}";
            errorMsg.style.display = "block";
            return false;
        }

        if (password !== repassword) {
            errorMsg.textContent = "{% trans 'Passwords do not match.' %}";
            errorMsg.style.display = "block";
            return false;
        }

        return true;
    }
</script>
{% endblock content %}
